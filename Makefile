#########################################
#     Custom MakeFile                   #
# By AJHL                  #
#########################################


#============================================
# Tools
#============================================

OCAMLBUILD=ocamlbuild -cflags -w,-a


#============================================
# Executable Targets
#============================================

TARGET=lib/captureio.cma

TEST1=t/01-capture_test.native


#============================================
# Compiling
#============================================

library:
	$(OCAMLBUILD) $(TARGET)

	
tests:
	$(OCAMLBUILD) -no-links -pkg testsimple $(TEST1)


#============================================
# Build
#============================================

all: library tests


#============================================
# Testing
#============================================

test:
	prove _build/t/*.native


#============================================
# Extra
#============================================
clean:
	$(OCAMLBUILD) -clean

.PHONY : clean native all

